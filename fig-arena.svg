<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C/DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1"
     baseProfile="full"
     width="1040" height="1240"
     xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink">
  <style type="text/css">
    <![CDATA[
      .arena-wall {
          fill: none;
          stroke: #555;
          stroke-width: .02;
      }

      .platform {
          fill: #eee;
          stroke: #777;
          stroke-width: .02;
      }

      .robot {
          fill: green;
          fill-opacity: 1;
          stroke: black;
          stroke-width: 0.02;
      }

      .corner {
          fill-opacity: 0.2;
      }
      .corner-0 {
          fill: #00ff00;
      }
      .corner-1 {
          fill: #ff6600;
      }

      .container {
          fill-opacity: 0.6;
          stroke: black;
          stroke-width: 0.005;
      }

      .starting-area {
          stroke: #333;
          stroke-width: 0.02;
          /*stroke-dasharray: 0.14142135, 0.14142135;*/
          stroke-dasharray: 0.08 0.08;
          stroke-dashoffset: -50%;
      }

      .docking-area {
          fill: none;
          stroke: #333;
          stroke-width: 0.02;
          stroke-dasharray: 0.08 0.08;
          stroke-dashoffset: -50%;
      }

      .raised-area {
          fill-opacity: 0.2;
          stroke: #333;
          stroke-width: 0.04;
      }

      .prow {
          fill: url(#diagonal-hatch);
          stroke: #666;
          stroke-width: 0.03;
          stroke-linejoin: round;
      }

      .dimension line {
        stroke: #666;
        stroke-width: 0.005;
        marker-start: url(#dimension-arrow-head-start);
        marker-end: url(#dimension-arrow-head-end);
      }

      .dimension text {
        fill: #666;
        font-size: 0.175px;
      }
      .dimension text.above {
        text-anchor: middle;
      }
      .dimension text.left-rotated {
        text-anchor: middle;
        transform: rotate(-90deg);
      }
      .dimension text.left {
        text-anchor: end;
        dominant-baseline: middle;
      }
      .dimension text.right {
        text-anchor: start;
        dominant-baseline: middle;
      }

      .dimension-arrow-head {
        fill: #666;
      }

      .dimension-guide {
        stroke: #666;
        stroke-width: 0.01;
        stroke-dasharray: 0.0025 0.04;
        stroke-linecap: round;
        fill: none;
      }

      .legend-label {
        font-size: 0.2px;
        text-anchor: start;
        dominant-baseline: middle;
      }

    ]]>
  </style>
  <!-- common patterns -->
  <defs>
    <pattern id="diagonal-hatch"
             patternUnits="objectBoundingBox"
             width="1"
             height="1"
             patternTransform="scale(0.07) rotate(45)">
      <rect width="0.75" height="2" x="0" y="0" style="fill:#ca8; stroke:none"/>
    </pattern>
    <!-- TODO: purge unused groups -->
    <rect width="0.35" height="0.4"
          x="-0.175" y="-0.2"
          class="robot"
          id="robot"/>
    <g id="starting-area">
      <rect width="0.9"
            height="0.9"
            x="-0.45"
            y="-0.45"
            class="starting-area"/>
      <g transform="rotate(45)">
        <use xlink:href="#robot"/>
      </g>
    </g>
    <rect id="container"
          width="0.175"
          height="0.175"
          x="-0.0875"
          y="-0.0875"
          class="container"/>
    <use id="container-0"
         xlink:href="#container"
         class="corner-0"/>
    <use id="container-1"
         xlink:href="#container"
         class="corner-1"/>
    <!-- arrow heads for dimensions -->
    <g id="dimension-arrow-head" transform="scale(0.05)">
      <path d="M0,0 L1,1 L1,-1 L0,0" class="dimension-arrow-head"/>
    </g>
    <marker id="dimension-arrow-head-start" orient="auto" markerWidth="1" markerHeight="2" refX="0" refY="1" markerUnits="userSpaceOnUse">
      <use xlink:href="#dimension-arrow-head" transform="translate(0 1)"/>
    </marker>
    <marker id="dimension-arrow-head-end" orient="auto" markerWidth="1" markerHeight="2" refX="1" refY="1" markerUnits="userSpaceOnUse">
      <use xlink:href="#dimension-arrow-head" transform="translate(1 1) scale(-1 1)"/>
    </marker>
  </defs>
  <!-- white background -->
  <rect width="100%" height="100%" fill="white"/>
  <!-- transform for arena-space coordinates -->
  <g id="arena-space" transform="scale(75)">
    <g id="arena"
      transform="translate(1 1)">
      <!-- starting areas -->
      <use class="corner corner-0" xlink:href="#starting-area" transform="translate(5.55 0.45)"/>
      <use class="corner corner-1" xlink:href="#starting-area" transform="translate(6.45 0.45) rotate(90)"/>
      <g class="dimension" transform="translate(6 0) translate(-0.9 1.02)">
        <line x1="0" y1="0" x2="0.9" y2="0"/>
        <text x="0.4" y="0.2" class="above">900mm</text>
      </g>
      <g class="dimension" transform="translate(6 0) translate(-1.02 0)">
        <line x1="0" y1="0.9" x2="0" y2="0"/>
        <text x="-0.6" y="-0.05" class="left-rotated">900mm</text>
      </g>
      <!-- ship -->
      <path d="M5.25,6 V6.5 A0.25 0.25 45 0 0 5.323 6.677 L5.8 7.154 Q6 7.33 6.2 7.154 L6.677 6.677 A0.25 0.25 45 0 0 6.75,6.5 V6" class="prow"/>
      <rect width="1.5" height="1" x="5.25" y="5" class="raised-area corner-1"/>
      <rect width="1.5" height="1.5" x="5.25" y="3.5" class="docking-area"/>
      <rect width="1.5" height="1" x="5.25" y="2.5" class="raised-area corner-0"/>
      <g class="dimension" transform="translate(6 5) translate(-0.87 0)">
        <line x1="0" y1="1" x2="0" y2="0"/>
        <text x="-0.6" y="-0.05" class="left-rotated">1000mm</text>
      </g>
      <g class="dimension" transform="translate(6 3.5) translate(-0.87 0)">
        <line x1="0" y1="1.5" x2="0" y2="0"/>
        <text x="-0.6" y="-0.05" class="left-rotated">1500mm</text>
      </g>
      <g class="dimension" transform="translate(6 2.5) translate(-0.87 0)">
        <line x1="0" y1="1" x2="0" y2="0"/>
        <text x="-0.6" y="-0.05" class="left-rotated">1000mm</text>
      </g>
      <g class="dimension" transform="translate(6 2.38)">
        <line x1="-0.75" y1="0" x2="0.75" y2="0"/>
        <text x="0" y="-0.075" class="above">1500mm</text>
      </g>
      <g transform="translate(6, 3) scale(1 -1)">
        <use xlink:href="#container-0"
             transform="translate(-5 -2.25)"/>
        <use xlink:href="#container-1"
             transform="translate(-3.5 -1.8)"/>
        <use xlink:href="#container-1"
             transform="translate(-2 -2.25)"/>
        <use xlink:href="#container-1"
             transform="translate(-4.25 -0.25)"/>
        <use xlink:href="#container-0"
             transform="translate(-2.75 -0.6)"/>
        <use xlink:href="#container-0"
             transform="translate(-4.8 0.8)"/>
        <use xlink:href="#container-1"
             transform="translate(-2.75 1.5)"/>
        <use xlink:href="#container-0"
             transform="translate(-1.5 0.75)"/>
        <use xlink:href="#container-1"
             transform="translate(5 -2.25)"/>
        <use xlink:href="#container-0"
             transform="translate(3.5 -1.8)"/>
        <use xlink:href="#container-0"
             transform="translate(2 -2.25)"/>
        <use xlink:href="#container-0"
             transform="translate(4.25 -0.25)"/>
        <use xlink:href="#container-1"
             transform="translate(2.75 -0.6)"/>
        <use xlink:href="#container-1"
             transform="translate(4.8 0.8)"/>
        <use xlink:href="#container-0"
             transform="translate(2.75 1.5)"/>
        <use xlink:href="#container-1"
             transform="translate(1.5 0.75)"/>
        <use xlink:href="#container-0"
             transform="translate(0 -1.55)"/>
        <use xlink:href="#container-1"
             transform="translate(0 -0.95)"/>
      </g>
      <g class="dimension" transform="translate(6, 3)">
        <line x1="-5.17" y1="2.3375" x2="-5.17" y2="2.1625"/>
        <g transform="translate(-5.14 2.25)">
          <text class="left-rotated" x="0.0" y="-0.12">175mm</text>
        </g>
      </g>
      <rect width="1.5" height="0.1" x="5.25" y="2.55" class="robot"/>
      <rect width="1.5" height="0.1" x="5.25" y="5.85" class="robot"/>
      <!-- arena wall -->
      <rect width="12"
            height="6"
            x="0"
            y="0"
            class="arena-wall"/>
      <g class="dimension" transform="translate(6 -0.2)">
        <line x1="-6" y1="0" x2="6" y2="0"/>
        <text x="0" y="-0.075" class="above">12000mm</text>
      </g>
      <g class="dimension" transform="translate(-0.2 3)">
        <line x1="0" y1="-3" x2="0" y2="3"/>
        <text x="0.03" y="-0.075" class="left-rotated">6000mm</text>
      </g>
    </g>
    <!-- TODO: move legend up -->
    <!-- TODO: centre legend -->
    <!-- TODO: update legend for new symbols -->
    <g id="legend"
       transform="translate(2.2 10.8)">
      <g transform="translate(0 0)">
        <use fill="none" xlink:href="#starting-area" transform="scale(0.5) translate(-0.6 -0.6)"/>
        <text x="0.5" y="0" class="legend-label">Robot starting area</text>
      </g>
    </g>
  </g>
</svg>
